<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" group">
<title>Write Your Own Group Studies | JATOS v3 Documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="Whats-JATOS.html"><img src="images/jatos_logo_color.svg" height="20">&nbsp;<span class="projectTitle"> JATOS v3 Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="https://github.com/JATOS/JATOS/releases" target="_blank">Download</a></li>
                
                
                
                <li><a href="Example-Studies.html" target="_blank">Example Studies</a></li>
                
                
                
                <li><a href="http://blog.jatos.org" target="_blank">Blog</a></li>
                
                
                
                <li><a href="Contact-us.html">Contact</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Write Your Own Group Studies">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="Whats-JATOS.html">What's JATOS</a></li>
            
            
            
            
            
            
            
            
            <li><a href="Installation.html">Installation</a></li>
            
            
            
            
            
            
            <li><a href="Get-started.html">Get started</a></li>
            
            
            
            
            
            
            <li><a href="Set-up-your-own-studies.html">Set up your own studies</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Beyond the basics</a>
        <ul>
            
            
            
            <li><a href="Run-your-Study-with-Batch-Manager-and-Worker-Setup.html">Run your Study with Batch Manager & Worker Setup</a></li>
            
            
            
            
            
            
            <li><a href="Worker-Types.html">Worker Types</a></li>
            
            
            
            
            
            
            <li><a href="Results.html">Results</a></li>
            
            
            
            
            
            
            <li><a href="Three-Types-of-Session-Data.html">Three Types of Session Data</a></li>
            
            
            
            
            
            
            <li><a href="Mandatory-lines-in-your-components-HTML.html">Mandatory lines in your components' HTML</a></li>
            
            
            
            
            
            
            <li><a href="Adapt-Pre-written-Code-to-run-it-in-JATOS.html">Adapt Pre written Code to run it in JATOS (Jatosify)</a></li>
            
            
            
            
            
            
            <li><a href="jsPsych-and-JATOS.html">jsPsych and JATOS</a></li>
            
            
            
            
            
            
            <li><a href="Tips-and-Tricks.html">Tips & Tricks</a></li>
            
            
            
            
            
            
            <li><a href="Connect-to-Mechanical-Turk.html">Connect to Mechanical Turk</a></li>
            
            
            
            
            
            
            <li><a href="Troubleshooting.html">Troubleshooting</a></li>
            
            
            
            
            
            
            <li><a href="User-Manager.html">Manage JATOS users</a></li>
            
            
            
            
            
            
            <li><a href="Update-JATOS.html">Update JATOS</a></li>
            
            
            
            
            
            
            <li><a href="Data-Privacy-and-Ethics.html">Data Privacy and Ethics</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Group Studies</a>
        <ul>
            
            
            
            <li><a href="Example-Group-Studies.html">Example Group Studies</a></li>
            
            
            
            
            
            
            <li><a href="Group-Study-Properties.html">Group Study Properties</a></li>
            
            
            
            
            
            
            <li class="active"><a href="Write-Your-Own-Group-Studies.html">Write Your Own Group Studies</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">For admins</a>
        <ul>
            
            
            
            <li><a href="JATOS-on-a-server.html">JATOS on a server</a></li>
            
            
            
            
            
            
            <li><a href="Configure-JATOS-on-a-Server.html">Configure JATOS on a Server</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-with-Nginx.html">JATOS with Nginx</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-with-Apache.html">JATOS with Apache</a></li>
            
            
            
            
            
            
            <li><a href="Install-JATOS-via-Docker.html">Install JATOS via Docker</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-in-Amazons-Cloud-without-Docker.html">JATOS in Amazon's Cloud (without Docker)</a></li>
            
            
            
            
            
            
            <li><a href="Updating-a-JATOS-server-installation.html">Updating a JATOS server installation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Reference</a>
        <ul>
            
            
            
            <li><a href="jatos.js-Reference.html">jatos.js Reference</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Write Your Own Group Studies</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" href="https://github.com/JATOS/JATOS_docs_v3/blob/master/pages//Write-Your-Own-Group-Studies.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

  <h2 id="writing-javascripts-for-group-studies">Writing JavaScripts for group studies</h2>

<p>Group studies differ from single-worker studies simply in that the JavaScript needs to handle groups and communications between members. The jatos.js library provides some useful functions for this.</p>

<p>If you like to dive right into jatos.js’ reference:</p>

<ul>
  <li><a href="jatos.js-Reference.html#functions-for-group-studies">jatos.js functions for group studies</a></li>
  <li><a href="jatos.js-Reference.html#group-variables">jatos.js group variables</a></li>
  <li><a href="jatos.js-Reference.html#groups-session-data">jatos.js group session</a></li>
</ul>

<h3 id="joining-a-group-and-opening-group-channels">Joining a group and opening group channels</h3>

<p>There are two requisites for allowing group members to interact:</p>

<ol>
  <li>
    <p>Workers can only communicate with members of their own group. So, interacting workers must all join the same group. 
<strong>A worker will remain in a group until jatos.js is explicitly told to leave the group (or the study run is finished). This means that if a worker moves between components or reloads a page they will remain in the same group.</strong> This feature makes groups much more robust.</p>
  </li>
  <li>
    <p>Communication can only be done if a group channel is open. Although jatos.js opens and closes all necessary group channels so you don’t have to care for them directly while writing components. Group channels in turn use <a href="https://en.wikipedia.org/wiki/WebSocket">WebSockets</a>. WebSockets are supported by <a href="http://caniuse.com/#feat=websockets">all modern browsers</a>.</p>
  </li>
</ol>

<p>So here’s how a typical JATOS group study run would look like:</p>

<p>Component 1</p>

<ul>
  <li><em>jatos.joinGroup</em> -&gt; joins group and opens group channel</li>
  <li><em>jatos.nextComponent</em> -&gt; closes group channel and jumps to next component</li>
</ul>

<p>Component 2</p>

<ul>
  <li><em>jatos.joinGroup</em> -&gt; opens group channel in the <strong>same group</strong></li>
  <li><em>jatos.nextComponent</em> -&gt; closes group channel and jumps to next component</li>
</ul>

<p>Component 3</p>

<ul>
  <li><em>jatos.joinGroup</em> -&gt; opens group channel <strong>same group</strong></li>
  <li><em>jatos.endStudy</em> -&gt; closes group channel, leaves group, ends component, and ends study</li>
</ul>

<p>Notice that by calling <em><a href="jatos.js-Reference.html#jatosjoingroupcallbacks">jatos.joinGroup</a></em> in the second and third component JATOS does not let workers join a new group but just opens a group channel in the already joined group. To make a worker leave a group,  use the function <a href="jatos.js-Reference.html#jatosleavegrouponsuccess-onerror"><em>jatos.leaveGroup</em></a>.</p>

<h3 id="reassigning-to-a-different-group">Reassigning to a different group</h3>

<p>To move a worker from one group to a different one, use <a href="jatos.js-Reference.html#jatosreassigngrouponsuccess-onfail"><em>jatos.reassignGroup</em></a>. This function will make a worker leave their group and join a different one. JATOS can only reassign to a different group if there is another group available. If there is no other group JATOS will not start a new one but put the worker into the same old group again.</p>

<h3 id="fixing-a-group">Fixing a group</h3>

<p>Sometimes you want to stay with the group like it is in the moment and don’t let new members join - although it would be allowed according to the group properties. For example in the <a href="http://v3.jatos.org/Example-Studies.html#prisoners-dilemma">Prisoner’s Example study</a> after the group is assembled in the waiting room component it is necessary to keep the two members as it is. Even if one of the members leaves in the middle of the game, JATOS shouldn’t just assign a new member. To do this call jatos.js’ function <a href="jatos.js-Reference.html#jatossetgroupfixed"><em>jatos.setGroupFixed</em></a>.</p>

<h2 id="communication-between-group-members">Communication between group members</h2>

<p>JATOS provides two ways for communicating within the group: direct messaging between group members or via the group session.</p>

<h3 id="direct-messaging">Direct messaging</h3>
<p>Members can send direct messages to other members of the same group with the <a href="jatos.js-Reference.html#jatossendgroupmsgmsg"><em>jatos.sendGroupMsg</em></a> and <a href="jatos.js-Reference.html#jatossendgroupmsgtorecipient-msg"><em>jatos.sendGroupMsgTo</em></a> functions. This way of communication is fast but can be unreliable in case of an unstable network connection. We use direct messaging in the <a href="http://v3.jatos.org/Example-Studies.html#snake">Snake example</a> to send the coordinates of the snakes on every step. Here, speed is more critical than reliability in the messages, because a few dropped frames will probably go unnoticed.</p>

<h3 id="group-session">Group session</h3>
<p>Members can set the group session data with the <a href="jatos.js-Reference.html#jatossetgroupsessiondatagroupsessiondata-onerror"><em>jatos.setGroupSessionData</em></a> function. At any time the group session data are available in jatos.js’ variable <a href="jatos.js-Reference.html#groups-session-data"><em>jatos.groupSessionData</em></a>. The group session data are stored in JATOS’ database <strong>only while the group is active. It is deleted when the group is finished.</strong> Communication via group session is slower, but more reliable than group messaging. If one member has an unstable internet connection or does a page reload, the group session will be automatically restored after the member reopens the group channel. Workers communicate via the group session data in the <a href="http://v3.jatos.org/Example-Studies.html#prisoners-dilemma">Prisoner’s Example study</a>, because it is important that each message reaches the other player.</p>


    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
<span>Page last updated:</span> 29 Dec 2016
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57013276-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>