<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="To run studies online, e.g. with Mechanical Turk, JATOS has to be installed on a server. Server instances of JATOS have slightly different configuration requ...">
<meta name="keywords" content=" server, installation, test, config, configuration">
<title>JATOS on a server | JATOS v3 Documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="Whats-JATOS.html"><img src="images/jatos_logo_color.svg" height="20">&nbsp;<span class="projectTitle"> JATOS v3 Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="https://github.com/JATOS/JATOS/releases" target="_blank">Download</a></li>
                
                
                
                <li><a href="Example-Studies.html" target="_blank">Example Studies</a></li>
                
                
                
                <li><a href="http://blog.jatos.org" target="_blank">Blog</a></li>
                
                
                
                <li><a href="Contact-us.html">Contact</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="JATOS on a server">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="Whats-JATOS.html">What's JATOS</a></li>
            
            
            
            
            
            
            
            
            <li><a href="Installation.html">Installation</a></li>
            
            
            
            
            
            
            <li><a href="Get-started.html">Get started</a></li>
            
            
            
            
            
            
            <li><a href="Set-up-your-own-studies.html">Set up your own studies</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Beyond the basics</a>
        <ul>
            
            
            
            <li><a href="Run-your-Study-with-Batch-Manager-and-Worker-Setup.html">Run your Study with Batch Manager & Worker Setup</a></li>
            
            
            
            
            
            
            <li><a href="Worker-Types.html">Worker Types</a></li>
            
            
            
            
            
            
            <li><a href="Results.html">Results</a></li>
            
            
            
            
            
            
            <li><a href="Three-Types-of-Session-Data.html">Three Types of Session Data</a></li>
            
            
            
            
            
            
            <li><a href="Mandatory-lines-in-your-components-HTML.html">Mandatory lines in your components' HTML</a></li>
            
            
            
            
            
            
            <li><a href="Adapt-Pre-written-Code-to-run-it-in-JATOS.html">Adapt Pre written Code to run it in JATOS (Jatosify)</a></li>
            
            
            
            
            
            
            <li><a href="jsPsych-and-JATOS.html">jsPsych and JATOS</a></li>
            
            
            
            
            
            
            <li><a href="Tips-and-Tricks.html">Tips & Tricks</a></li>
            
            
            
            
            
            
            <li><a href="Connect-to-Mechanical-Turk.html">Connect to Mechanical Turk</a></li>
            
            
            
            
            
            
            <li><a href="Troubleshooting.html">Troubleshooting</a></li>
            
            
            
            
            
            
            <li><a href="User-Manager.html">Manage JATOS users</a></li>
            
            
            
            
            
            
            <li><a href="Update-JATOS.html">Update JATOS</a></li>
            
            
            
            
            
            
            <li><a href="Data-Privacy-and-Ethics.html">Data Privacy and Ethics</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Group Studies</a>
        <ul>
            
            
            
            <li><a href="Example-Group-Studies.html">Example Group Studies</a></li>
            
            
            
            
            
            
            <li><a href="Group-Study-Properties.html">Group Study Properties</a></li>
            
            
            
            
            
            
            <li><a href="Write-Your-Own-Group-Studies.html">Write Your Own Group Studies</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">For admins</a>
        <ul>
            
            
            
            <li class="active"><a href="JATOS-on-a-server.html">JATOS on a server</a></li>
            
            
            
            
            
            
            <li><a href="Configure-JATOS-on-a-Server.html">Configure JATOS on a Server</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-with-Nginx.html">JATOS with Nginx</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-with-Apache.html">JATOS with Apache</a></li>
            
            
            
            
            
            
            <li><a href="Install-JATOS-via-Docker.html">Install JATOS via Docker</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-in-Amazons-Cloud-without-Docker.html">JATOS in Amazon's Cloud (without Docker)</a></li>
            
            
            
            
            
            
            <li><a href="Updating-a-JATOS-server-installation.html">Updating a JATOS server installation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Reference</a>
        <ul>
            
            
            
            <li><a href="jatos.js-Reference.html">jatos.js Reference</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">JATOS on a server</h1>
</div>



<div class="post-content">

   
    <div class="summary">To run studies online, e.g. with Mechanical Turk, JATOS has to be installed on a server. Server instances of JATOS have slightly different configuration requirements than local instances. This text aims at server admins who wants to setup a server running JATOS and who know their way around server management.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" href="https://github.com/JATOS/JATOS_docs_v3/blob/master/pages//JATOS-on-a-server.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

  <p>There are several ways to bring JATOS to the internet. You can install it</p>

<ul>
  <li>on your own dedicated server</li>
  <li>in the cloud on an Infrastructure as a Service (IaaS)</li>
  <li>in the cloud with a Docker container</li>
</ul>

<p>The first two are discussed here in this page. For the last one JATOS provides a <a href="Install-JATOS-via-Docker.html">Docker image</a>.</p>

<p>One word about IaaS. There are many IaaS providers (Digital Ocean, Microsoft Azure, Google Cloud, Amazon’s AWS etc.). They all give you a virtual machine (VM) and the possibility to install an operating system on it. I’d recommend to go with a Linux system like Ubuntu or Debian. Another point is to make sure they have persistent storage and not what is often called ‘ephemeral storage’ (storage that is deleted after the VM shuts down). Since JATOS stores all study assets in the server’s file system persistent storage is needed. But apart from that it’s the same JATOS installation like on a dedicated server. In <a href="JATOS-in-Amazons-Cloud-without-Docker.html">JATOS in Amazon’s Cloud (without Docker)</a> we have some advice in how to do it in AWS.</p>

<p>The actual JATOS instance on a server isn’t too different from a local one. It basically involves telling JATOS which IP address and port it should use and (optionally) replace the H2 database with a MySQL one. There are other issues however, not directly related to JATOS, that you should consider when setting up a server. These include: setting up automatic, regular backups of your data, an automatic restart of JATOS after a server reboot, encryption, additional HTTP server, etc. The purpose of this page is not to teach you how to set up a server in general (you do need to know a little bit about Internet and security issues and should not try it at home unless you know what you’re doing!). Here, we simply cover the steps to server setup that are related to JATOS.</p>

<h3 id="java">Java</h3>
<p>We’ve produced multiple versions of JATOS. The simplest version is JATOS alone, but other versions are bundled with Java JRE. On a server, it’s best (though not necessary) to install JATOS without a bundled Java. This will make it easier to upgrade to new Java releases.</p>

<h3 id="configuration">Configuration</h3>
<p>If JATOS runs locally it’s usually not necessary to change the defaults but on a server you probably want to set up the IP and port or maybe use a different database and change the path of the study assets root folder. These docs have an extra page on how to <a href="Configure-JATOS-on-a-Server.html">Configure JATOS on a Server</a>.</p>

<h3 id="change-admins-password">Change admin’s password</h3>
<p>Every JATOS installation has the same default admin password ‘admin’. You must change it before the server goes live. This can be done in the GUI: 1) login as ‘admin’, 2) click on your user in the header 3) Click ‘Change Password’.</p>

<h3 id="test-page">Test page</h3>
<p>JATOS comes with a test page <code class="highlighter-rouge">/jatos/test</code> that shows some of the current configuration, system properties, and does some tests, e.g. WebSockets connections and database connection. All tests should show an ‘OK’.</p>

<h3 id="backup">Backup</h3>
<p>You should set up a regular backup of your data from JATOS. These include (1.) the data stored in the database and (2.) your study assets folder.</p>

<ol>
  <li>
    <p>If you use the default H2 database you can just backup the folder <code class="highlighter-rouge">my-jatos-path/database</code>. In case you want to restore an older version from the backup just replace the current version of the folder with the backed-up version. If you use a MySQL database you might want to look into the <code class="highlighter-rouge">mysqldump</code> shell command. E.g., with <code class="highlighter-rouge">mysqldump -u myusername -p mydbname &gt; mysql_bkp.out</code> you can backup the whole data into a single file. Restore the database with <code class="highlighter-rouge">mysql -u myusername -p mydbname &lt; mysql_bkp.out</code>.</p>
  </li>
  <li>
    <p>You can just make a backup of your study assets folder. If you want to return to a prior version replace the current folder with the backed-up version.</p>
  </li>
</ol>

<p>Remember, a backup has to be done of <strong>both</strong> the database <strong>and</strong> the study assets root folder.</p>

<h3 id="http-server">HTTP server</h3>
<p>JATOS doesn’t need an HTTP server (like Nginx or Apache). It is its own HTTP server. But sometimes it is necessary to have an additional server in front of JATOS (e.g. for HTTPS encryption). In <a href="JATOS-with-Nginx.html">JATOS with Nginx</a> we show a sample configuration for Nginx and in <a href="JATOS-with-Apache.html">JATOS with Apache</a> for Apache. And keep in mind that JATOS uses WebSockets for group studies and your HTTP server should be configured to support them.</p>

<h3 id="auto-start-jatos-on-linuxunix-as-a-daemon">Auto-start JATOS on Linux/Unix as a daemon</h3>

<p>It’s nice to have JATOS starts automatically after a start or a reboot of your machine. It’s easy to turn the <code class="highlighter-rouge">loader.sh</code> script that you normally use to start JATOS into an init script for a daemon.</p>

<ol>
  <li>Copy the <code class="highlighter-rouge">loader.sh</code> script to <code class="highlighter-rouge">/etc/init.d/</code></li>
  <li>Rename it to <code class="highlighter-rouge">jatos</code></li>
  <li>Change access permission with <code class="highlighter-rouge">chmod og+x jatos</code></li>
  <li>Edit <code class="highlighter-rouge">/etc/init.d/jatos</code>
    <ol>
      <li>Specify the IP address and port you want to use</li>
      <li>Comment out the line <code class="highlighter-rouge">dir="$( cd "$( dirname "$0" )" &amp;&amp; pwd )"</code></li>
      <li>
        <p>Add variable <code class="highlighter-rouge">dir=</code> with the path to your JATOS installation</p>

        <p>The beginning of your <code class="highlighter-rouge">/etc/init.d/jatos</code> should look like:</p>

        <div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># JATOS loader for Linux and MacOS X</span>
      
<span class="c"># Change IP address and port here</span>
<span class="nv">address</span><span class="o">=</span><span class="s2">"127.0.0.1"</span>
<span class="nv">port</span><span class="o">=</span><span class="s2">"9000"</span>
<span class="nv">dir</span><span class="o">=</span><span class="s2">"/path/to/my/JATOS/installation"</span>
      
<span class="c"># Don't change after here unless you know what you're doing</span>
<span class="c">#####################################</span>
<span class="c"># Get JATOS directory</span>
<span class="c">#dir="$( cd "$( dirname "$0" )" &amp;&amp; pwd )"</span>
<span class="nv">pidfile</span><span class="o">=</span><span class="nv">$dir</span>/RUNNING_PID
</code></pre>
        </div>
        <p> </p>
      </li>
    </ol>
  </li>
  <li>Make it auto-start with the command <code class="highlighter-rouge">sudo update-rc.d jatos defaults</code></li>
</ol>

<p>Now JATOS starts automatically when you start your server and stops when you shut it down. You can also use the init script yourself like any other init script with <code class="highlighter-rouge">sudo /etc/init.d/jatos start|stop|restart</code>.</p>

<h3 id="encryption-and-https">Encryption and HTTPS</h3>
<p>Most admins tend to use an additional HTTP server in front of JATOS for encryption purpose. But since JATOS is built with the Play Framework it can be setup JATOS directly by following their <a href="https://www.playframework.com/documentation/2.4.x/ConfiguringHttps">Documentation about Configuring HTTPS</a>.</p>

<h3 id="jvm-memory">JVM Memory</h3>
<p>If your JATOS instance has a high worker load or runs many different studies, you might have to increase the memory that is available to the JVM that runs JATOS. A clear sign that your JVM needs more memory is a <code class="highlighter-rouge">java.lang.OutOfMemoryError</code> in your log. To increase the maximal available memory use the <code class="highlighter-rouge">-Xmx</code> parameter of the JVM. You can set it in the environment variable JAVA_OPTS. E.g. to set it to 2048 MB use <code class="highlighter-rouge">export set JAVA_OPTS="-Xmx2048m"</code> on a Linux/MacOS X system.</p>


    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
<span>Page last updated:</span> 29 Dec 2016
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57013276-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>